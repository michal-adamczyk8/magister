{"ast":null,"code":"import { PetService } from \"src/app/pet-shared/pet-service\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { TakerService } from 'src/app/taker/taker-shared/taker-service';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ConfirmDialogComponent } from 'src/app/common/confirm-dialog/confirm-dialog.component';\nimport { AuthenticationService } from 'src/app/security/authentication.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/pet-shared/pet-service\";\nimport * as i2 from \"src/app/taker/taker-shared/taker-service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"src/app/security/authentication.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"ngx-pagination\";\nimport * as i8 from \"@angular/forms\";\n\nfunction PetListComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"td\", 17);\n    i0.ɵɵelementStart(2, \"div\", 18);\n    i0.ɵɵelementStart(3, \"img\", 19);\n    i0.ɵɵlistener(\"click\", function PetListComponent_div_11_Template_img_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const pet_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.onNavToDetails(pet_r2);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 20);\n    i0.ɵɵelementStart(5, \"div\", 21);\n    i0.ɵɵelementStart(6, \"div\", 22);\n    i0.ɵɵelementStart(7, \"h5\", 23);\n    i0.ɵɵelementStart(8, \"a\", 24);\n    i0.ɵɵlistener(\"click\", function PetListComponent_div_11_Template_a_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const pet_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onNavToDetails(pet_r2);\n    });\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 25);\n    i0.ɵɵelementStart(11, \"ul\", 26);\n    i0.ɵɵelementStart(12, \"li\");\n    i0.ɵɵelement(13, \"i\", 27);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"li\");\n    i0.ɵɵelement(16, \"i\", 28);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"td\", 29);\n    i0.ɵɵelementStart(19, \"span\", 30);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵelementStart(22, \"ul\", 31);\n    i0.ɵɵelementStart(23, \"li\");\n    i0.ɵɵelementStart(24, \"a\", 32);\n    i0.ɵɵlistener(\"click\", function PetListComponent_div_11_Template_a_click_24_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const pet_r2 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onNavToDetails(pet_r2);\n    });\n    i0.ɵɵelement(25, \"i\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"li\");\n    i0.ɵɵelementStart(27, \"a\", 34);\n    i0.ɵɵlistener(\"click\", function PetListComponent_div_11_Template_a_click_27_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const pet_r2 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.onNavToEdit(pet_r2);\n    });\n    i0.ɵɵelement(28, \"i\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"li\");\n    i0.ɵɵelementStart(30, \"a\", 36);\n    i0.ɵɵlistener(\"click\", function PetListComponent_div_11_Template_a_click_30_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const pet_r2 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.onDelete(pet_r2);\n    });\n    i0.ɵɵelement(31, \"i\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const pet_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"pet\", pet_r2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", pet_r2.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(pet_r2.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", pet_r2.raceType, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", pet_r2.weight, \"kg \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(pet_r2.status);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"hidden\", !ctx_r0.isManagerOrAdmin);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", !ctx_r0.isManagerOrAdmin);\n  }\n}\n\nfunction PetListComponent_option_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const size_r9 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngValue\", ctx_r1.pageSize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", size_r9, \" \");\n  }\n}\n\nconst _c0 = function (a0, a1, a2) {\n  return {\n    itemsPerPage: a0,\n    currentPage: a1,\n    totalItems: a2\n  };\n};\n\nexport let PetListComponent = /*#__PURE__*/(() => {\n  class PetListComponent {\n    constructor(petService, takerService, activatedRoute, router, dialog, authService) {\n      this.petService = petService;\n      this.takerService = takerService;\n      this.activatedRoute = activatedRoute;\n      this.router = router;\n      this.dialog = dialog;\n      this.authService = authService;\n      this.pets = [];\n      this.currentSelectedPage = 0;\n      this.pageSize = 10;\n      this.pageSizes = [5, 10, 15, 20];\n      this.page = 1;\n    }\n\n    ngOnInit() {\n      this.shelterId = +this.activatedRoute.snapshot.paramMap.get(\"shelterId\");\n      this.takerId = +this.activatedRoute.snapshot.paramMap.get(\"takerId\");\n\n      if (this.shelterId) {\n        this.retrievePetsForShelter();\n      } else {\n        this.retrievePetsForTaker();\n      }\n\n      this.isManagerOrAdmin = this.authService.isLoggedManagerOrAdmin();\n      this.isManager = this.authService.isLoggedUserManager();\n    }\n\n    retrievePets() {\n      if (this.shelterId) {\n        this.retrievePetsForShelter();\n      } else {\n        this.retrievePetsForTaker();\n      }\n    }\n\n    retrievePetsForShelter() {\n      this.petService.getAllPetsForShelter(this.shelterId, this.page - 1, this.pageSize).subscribe(petPage => {\n        this.pets = petPage.content;\n        this.totalItems = petPage.totalElements;\n        this.currentSelectedPage = petPage.number;\n        this.itemsPerPage = this.totalItems / this.pageSize;\n      }, error => {\n        console.log(\"Error: \" + error);\n      });\n    }\n\n    retrievePetsForTaker() {\n      this.takerService.getAllPetsForTaker(this.takerId, this.page - 1, this.pageSize).subscribe(petPage => {\n        this.pets = petPage.content;\n        this.totalItems = petPage.totalElements;\n        this.currentSelectedPage = petPage.number;\n        this.itemsPerPage = this.totalItems / this.pageSize;\n      }, error => {\n        console.log(\"Error: \" + error);\n      });\n    }\n\n    handlePageChange(event) {\n      this.page = event;\n      this.retrievePets();\n    }\n\n    handlePageSizeChange(event) {\n      this.pageSize = event.target.value;\n      this.page = 1;\n      this.retrievePets();\n    }\n\n    onAddPet() {\n      const httpUrl = \"/shelter/\" + this.shelterId + \"/pets/new\";\n      this.router.navigate([httpUrl], {\n        state: {\n          data: this.shelterId\n        }\n      });\n    }\n\n    onNavToDetails(pet) {\n      this.router.navigate(['pets/details', pet.id]);\n    }\n\n    onNavToEdit(pet) {\n      this.router.navigate([\"/pets/details/edit\", pet.id]);\n    }\n\n    onDelete(pet) {\n      const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n        maxWidth: \"400px\",\n        data: {\n          title: \"Jesteś pewien?\",\n          message: \"Właśnie usuwasz tego zwierzaka z systemu.\"\n        }\n      });\n      dialogRef.afterClosed().subscribe(dialogResult => {\n        if (dialogResult) {\n          this.petService.deletePet(pet.id);\n          this.router.navigate(['/shelters']);\n        }\n      });\n    }\n\n    onAddNewPet() {\n      this.router.navigate([\"/pets/new\"]);\n    }\n\n  }\n\n  PetListComponent.ɵfac = function PetListComponent_Factory(t) {\n    return new (t || PetListComponent)(i0.ɵɵdirectiveInject(i1.PetService), i0.ɵɵdirectiveInject(i2.TakerService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.MatDialog), i0.ɵɵdirectiveInject(i5.AuthenticationService));\n  };\n\n  PetListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PetListComponent,\n    selectors: [[\"app-pet-list\"]],\n    decls: 22,\n    vars: 12,\n    consts: [[\"rel\", \"stylesheet\", \"href\", \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css\", \"integrity\", \"sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA=\", \"crossorigin\", \"anonymous\"], [1, \"container\", \"mt-3\", \"mb-4\"], [1, \"col-lg-9\", \"mt-4\", \"mt-lg-0\"], [1, \"row\"], [1, \"col-md-12\"], [1, \"user-dashboard-info-box\", \"table-responsive\", \"mb-0\", \"bg-white\", \"p-4\", \"shadow-sm\"], [1, \"btn\", \"btn-success\", 3, \"hidden\", \"click\"], [1, \"table\", \"manage-candidates-top\", \"mb-0\"], [1, \"candidates-list\"], [3, \"pet\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-center\", \"mt-3\", \"mt-sm-3\"], [1, \"pagination\", \"justify-content-center\", \"mb-0\"], [\"responsive\", \"true\", 3, \"pageChange\"], [3, \"change\"], [\"disabled\", \"\", 3, \"ngValue\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [3, \"pet\"], [1, \"title\"], [1, \"thumb\"], [1, \"img-fluid\", 3, \"src\", \"click\"], [1, \"candidate-list-details\"], [1, \"candidate-list-info\"], [1, \"candidate-list-title\"], [1, \"mb-0\"], [3, \"click\"], [1, \"candidate-list-option\"], [1, \"list-unstyled\"], [1, \"fas\", \"fa-filter\", \"pr-1\"], [1, \"fas\", \"fa-weight-hanging\", \"pr-1\"], [1, \"candidate-list-favourite-time\", \"text-center\"], [1, \"candidate-list-time\", \"order-1\"], [1, \"list-unstyled\", \"mb-0\", \"d-flex\", \"justify-content-end\"], [\"data-toggle\", \"tooltip\", \"title\", \"Szczeg\\u00F3\\u0142y\", \"data-original-title\", \"view\", 1, \"text-primary\", 3, \"click\"], [1, \"far\", \"fa-eye\"], [\"data-toggle\", \"tooltip\", \"title\", \"Edytuj\", \"data-original-title\", \"Edit\", 1, \"text-info\", 3, \"hidden\", \"click\"], [1, \"fas\", \"fa-pencil-alt\"], [\"data-toggle\", \"tooltip\", \"title\", \"Usu\\u0144\", \"data-original-title\", \"Delete\", 1, \"text-danger\", 3, \"hidden\", \"click\"], [1, \"far\", \"fa-trash-alt\"], [3, \"ngValue\"]],\n    template: function PetListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"link\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function PetListComponent_Template_button_click_6_listener() {\n          return ctx.onAddNewPet();\n        });\n        i0.ɵɵtext(7, \"Dodaj nowego zwierzaka\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"table\", 7);\n        i0.ɵɵelementStart(9, \"tbody\");\n        i0.ɵɵelementStart(10, \"tr\", 8);\n        i0.ɵɵtemplate(11, PetListComponent_div_11_Template, 32, 8, \"div\", 9);\n        i0.ɵɵpipe(12, \"paginate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 10);\n        i0.ɵɵelementStart(14, \"div\", 11);\n        i0.ɵɵelementStart(15, \"pagination-controls\", 12);\n        i0.ɵɵlistener(\"pageChange\", function PetListComponent_Template_pagination_controls_pageChange_15_listener($event) {\n          return ctx.handlePageChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 10);\n        i0.ɵɵtext(17, \" Liczba element\\u00F3w na stronie: \");\n        i0.ɵɵelementStart(18, \"select\", 13);\n        i0.ɵɵlistener(\"change\", function PetListComponent_Template_select_change_18_listener($event) {\n          return ctx.handlePageSizeChange($event);\n        });\n        i0.ɵɵelementStart(19, \"option\", 14);\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(21, PetListComponent_option_21_Template, 2, 2, \"option\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"hidden\", !ctx.isManager);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(12, 5, ctx.pets, i0.ɵɵpureFunction3(8, _c0, ctx.pageSize, ctx.page, ctx.totalItems)));\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngValue\", null);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx.pageSize);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.pageSizes);\n      }\n    },\n    directives: [i6.NgForOf, i7.PaginationControlsComponent, i8.NgSelectOption, i8.ɵNgSelectMultipleOption],\n    pipes: [i7.PaginatePipe],\n    styles: [\"\"]\n  });\n  return PetListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}