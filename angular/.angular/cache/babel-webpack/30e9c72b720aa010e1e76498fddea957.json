{"ast":null,"code":"import { TakerService } from '../taker-shared/taker-service';\nimport { Router } from '@angular/router';\nimport { Location } from \"@angular/common\";\nimport { FormGroup, Validators } from '@angular/forms';\nimport { CustomValidators } from 'src/app/validators/custom-validators';\nimport { NotificationService } from 'src/app/notification/notification.service';\nimport { NotificationType } from 'src/app/enum/notification-type.enum';\nimport { AuthenticationService } from 'src/app/security/authentication.service';\nimport { NewTakerRequest } from '../taker-shared/new-taker-request';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../taker-shared/taker-service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"src/app/notification/notification.service\";\nimport * as i5 from \"src/app/security/authentication.service\";\nimport * as i6 from \"@angular/forms\";\n\nfunction TakerNewComponent_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Imi\\u0119 opiekuna jest wymagana \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TakerNewComponent_div_14_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Imi\\u0119 opiekuna jest za kr\\u00F3tka \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TakerNewComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, TakerNewComponent_div_14_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵtemplate(2, TakerNewComponent_div_14_div_2_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.firstName.errors.notOnlyWhitespace);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.firstName.errors.minlength);\n  }\n}\n\nfunction TakerNewComponent_div_22_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Naziwsko opiekuna jest wymagana \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TakerNewComponent_div_22_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Nazwisko opiekuna jest za kr\\u00F3tka \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TakerNewComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, TakerNewComponent_div_22_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵtemplate(2, TakerNewComponent_div_22_div_2_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.lastName.errors.notOnlyWhitespace);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.lastName.errors.minlength);\n  }\n}\n\nfunction TakerNewComponent_div_30_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Numer telefonu jest wymagany \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TakerNewComponent_div_30_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Numer telefonu jest za kr\\u00F3tki \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TakerNewComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, TakerNewComponent_div_30_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵtemplate(2, TakerNewComponent_div_30_div_2_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.phoneNumber.errors.notOnlyWhitespace);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.phoneNumber.errors.minlength);\n  }\n}\n\nfunction TakerNewComponent_div_38_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Email jest wmagany \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TakerNewComponent_div_38_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Email jest niepoprawny \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TakerNewComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, TakerNewComponent_div_38_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵtemplate(2, TakerNewComponent_div_38_div_2_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.name.errors.notOnlyWhitespace);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.email.errors.pattern);\n  }\n}\n\nexport let TakerNewComponent = /*#__PURE__*/(() => {\n  class TakerNewComponent {\n    constructor(takerService, appRouter, location, notificationService, authService) {\n      this.takerService = takerService;\n      this.appRouter = appRouter;\n      this.location = location;\n      this.notificationService = notificationService;\n      this.authService = authService;\n    }\n\n    ngOnInit() {\n      this.shelterId = this.authService.getLoggedUserShelterId();\n      this.initForm();\n    }\n\n    initForm() {\n      this.takerForm = new FormGroup({\n        firstName: new FormGroup(null, [Validators.minLength(3), CustomValidators.notOnlyWhitespace]),\n        lastName: new FormGroup(null, [Validators.minLength(3), CustomValidators.notOnlyWhitespace]),\n        email: new FormGroup(null, [Validators.minLength(3), CustomValidators.notOnlyWhitespace]),\n        phoneNumber: new FormGroup(null, [Validators.minLength(3), CustomValidators.notOnlyWhitespace]),\n        imageUrl: new FormGroup(null, [Validators.required])\n      });\n    }\n\n    onSubmit(takerForm) {\n      if (this.takerForm.invalid) {\n        this.takerForm.markAllAsTouched();\n        return;\n      }\n\n      const newTaker = new NewTakerRequest(takerForm.value.firstName, takerForm.value.lastName, takerForm.value.email, takerForm.value.phoneNumber, takerForm.value.imageUrl, this.shelterId);\n      this.takerService.addTaker(newTaker);\n      this.notificationService.notify(NotificationType.SUCCESS, \"Opiekun został pomyślnie dodany.\");\n      this.appRouter.navigate([\"/takers\"]);\n    }\n\n    onGoBack() {\n      this.location.back();\n    }\n\n    get firstName() {\n      return this.takerForm.get('firstName');\n    }\n\n    get lastName() {\n      return this.takerForm.get('lastName');\n    }\n\n    get email() {\n      return this.takerForm.get('email');\n    }\n\n    get phoneNumber() {\n      return this.takerForm.get('phoneNumber');\n    }\n\n    get imageUrl() {\n      return this.takerForm.get('imageUrl');\n    }\n\n  }\n\n  TakerNewComponent.ɵfac = function TakerNewComponent_Factory(t) {\n    return new (t || TakerNewComponent)(i0.ɵɵdirectiveInject(i1.TakerService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i4.NotificationService), i0.ɵɵdirectiveInject(i5.AuthenticationService));\n  };\n\n  TakerNewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TakerNewComponent,\n    selectors: [[\"app-taker-new\"]],\n    decls: 55,\n    vars: 5,\n    consts: [[1, \"container\"], [1, \"text-primary\"], [1, \"row\"], [1, \"col-md-8\"], [3, \"formGroup\", \"ngSubmit\"], [\"form\", \"ngForm\"], [1, \"col-xs-8\"], [1, \"form-group\"], [\"for\", \"name\"], [\"formControlName\", \"firstName\", \"id\", \"firstName\", \"placeholder\", \"Imi\\u0119...\", \"type\", \"text\", 1, \"form-control\"], [\"class\", \"alert alert-danger mt-1\", 4, \"ngIf\"], [\"formControlName\", \"lastName\", \"id\", \"lastName\", \"placeholder\", \"Nazwisko...\", \"type\", \"text\", 1, \"form-control\"], [1, \"form-group\", \"customInput\"], [\"for\", \"phoneNumber\"], [\"formControlName\", \"phoneNumber\", \"id\", \"phoneNumber\", \"name\", \"phoneNumber\", \"placeholder\", \"Tel. kontaktowy:...\", \"type\", \"tel\", 1, \"form-control\"], [1, \"col-xs-6\"], [\"for\", \"email\"], [\"formControlName\", \"email\", \"id\", \"email\", \"name\", \"email\", \"placeholder\", \"Adres email...\", \"type\", \"email\", 1, \"form-control\"], [\"for\", \"imageUrl\"], [\"formControlName\", \"imageUrl\", \"id\", \"imageUrl\", \"name\", \"imageUrl\", \"placeholder\", \"Link do zdj\\u0119cia...\", \"type\", \"text\", 1, \"form-control\"], [1, \"col-xs-1\"], [1, \"btn\", \"btn-info\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\"], [1, \"alert\", \"alert-danger\", \"mt-1\"], [4, \"ngIf\"]],\n    template: function TakerNewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r13 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"hr\");\n        i0.ɵɵelementStart(2, \"h1\", 1);\n        i0.ɵɵtext(3, \"Dodawanie nowego opiekuna\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelementStart(6, \"form\", 4, 5);\n        i0.ɵɵlistener(\"ngSubmit\", function TakerNewComponent_Template_form_ngSubmit_6_listener() {\n          i0.ɵɵrestoreView(_r13);\n\n          const _r0 = i0.ɵɵreference(7);\n\n          return ctx.onSubmit(_r0);\n        });\n        i0.ɵɵelementStart(8, \"div\", 2);\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵelementStart(11, \"label\", 8);\n        i0.ɵɵtext(12, \"Imi\\u0119: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"input\", 9);\n        i0.ɵɵtemplate(14, TakerNewComponent_div_14_Template, 3, 2, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"hr\");\n        i0.ɵɵelementStart(16, \"div\", 2);\n        i0.ɵɵelementStart(17, \"div\", 6);\n        i0.ɵɵelementStart(18, \"div\", 7);\n        i0.ɵɵelementStart(19, \"label\", 8);\n        i0.ɵɵtext(20, \"Nazwisko: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 11);\n        i0.ɵɵtemplate(22, TakerNewComponent_div_22_Template, 3, 2, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"hr\");\n        i0.ɵɵelementStart(24, \"div\", 2);\n        i0.ɵɵelementStart(25, \"div\", 6);\n        i0.ɵɵelementStart(26, \"div\", 12);\n        i0.ɵɵelementStart(27, \"label\", 13);\n        i0.ɵɵtext(28, \"Telefon kontaktowy: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(29, \"input\", 14);\n        i0.ɵɵtemplate(30, TakerNewComponent_div_30_Template, 3, 2, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"hr\");\n        i0.ɵɵelementStart(32, \"div\", 2);\n        i0.ɵɵelementStart(33, \"div\", 15);\n        i0.ɵɵelementStart(34, \"div\", 12);\n        i0.ɵɵelementStart(35, \"label\", 16);\n        i0.ɵɵtext(36, \"Adres email: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(37, \"input\", 17);\n        i0.ɵɵtemplate(38, TakerNewComponent_div_38_Template, 3, 2, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(39, \"hr\");\n        i0.ɵɵelementStart(40, \"div\", 2);\n        i0.ɵɵelementStart(41, \"div\", 15);\n        i0.ɵɵelementStart(42, \"div\", 12);\n        i0.ɵɵelementStart(43, \"label\", 18);\n        i0.ɵɵtext(44, \"Link do zdj\\u0119cia: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(45, \"input\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"div\", 2);\n        i0.ɵɵelementStart(47, \"div\", 20);\n        i0.ɵɵelementStart(48, \"button\", 21);\n        i0.ɵɵlistener(\"click\", function TakerNewComponent_Template_button_click_48_listener() {\n          return ctx.onGoBack();\n        });\n        i0.ɵɵtext(49, \" Cofnij \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"div\", 20);\n        i0.ɵɵelementStart(51, \"div\", 7);\n        i0.ɵɵelementStart(52, \"button\", 22);\n        i0.ɵɵtext(53, \"Dodaj\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(54, \"hr\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.takerForm);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.firstName.invalid && (ctx.firstName.dirty || ctx.firstName.touched));\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.lastName.invalid && (ctx.lastName.dirty || ctx.lastName.touched));\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.phoneNumber.invalid && (ctx.phoneNumber.dirty || ctx.phoneNumber.touched));\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.email.invalid && (ctx.email.dirty || ctx.email.touched));\n      }\n    },\n    directives: [i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.DefaultValueAccessor, i6.NgControlStatus, i6.FormControlName, i3.NgIf],\n    styles: [\"button[_ngcontent-%COMP%]{margin:10px}\"]\n  });\n  return TakerNewComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}