{"ast":null,"code":"import { TakerService } from '../taker-shared/taker-service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ConfirmDialogComponent } from 'src/app/common/confirm-dialog/confirm-dialog.component';\nimport { AuthenticationService } from 'src/app/security/authentication.service';\nimport { TakerCache } from '../taker-shared/taker-cache.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../taker-shared/taker-service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"src/app/security/authentication.service\";\nimport * as i6 from \"../taker-shared/taker-cache.service\";\nexport let TakerDetailsComponent = /*#__PURE__*/(() => {\n  class TakerDetailsComponent {\n    constructor(takerService, route, location, appRouter, dialog, authService, takerCacheService) {\n      this.takerService = takerService;\n      this.route = route;\n      this.location = location;\n      this.appRouter = appRouter;\n      this.dialog = dialog;\n      this.authService = authService;\n      this.takerCacheService = takerCacheService;\n      this.page = 0;\n      this.size = 10;\n    }\n\n    ngOnInit() {\n      this.getCurrentTaker();\n      this.isManagerOrAdmin = this.authService.isLoggedManagerOrAdmin();\n    }\n\n    getTakerId() {\n      this.takerId = +this.route.snapshot.paramMap.get('takerId');\n    }\n\n    getCurrentTaker() {\n      const cachedTaker = this.takerCacheService.retrieve();\n\n      if (cachedTaker == null) {\n        this.getTakerId();\n        this.takerService.getSingleTaker(this.takerId).subscribe(response => {\n          this.taker = response;\n          this.shelter = response.shelter;\n        });\n      } else {\n        this.taker = cachedTaker;\n        this.shelter = cachedTaker.shelter;\n      }\n    }\n\n    onDelete() {\n      const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n        maxWidth: \"400px\",\n        data: {\n          title: \"Jesteś pewien?\",\n          message: \"Właśnie usuwasz tego opiekuna z systemu.\"\n        }\n      });\n      dialogRef.afterClosed().subscribe(dialogResult => {\n        if (dialogResult) {\n          this.takerService.deleteTaker(this.taker);\n          this.appRouter.navigate(['/takers']);\n        }\n      });\n    }\n\n    onGoBack() {\n      this.location.back();\n    }\n\n    onNavToShelterDetails() {\n      let navigationExtras = {\n        state: {\n          shelter: this.shelter\n        }\n      };\n      this.appRouter.navigate([\"/shelter\", this.shelter.id], navigationExtras);\n    }\n\n    onNavToEdit() {\n      let navigationExtras = {\n        state: {\n          shelter: this.shelter\n        }\n      };\n      this.appRouter.navigate([\"/takers/details/edit\", this.taker.id], navigationExtras);\n    }\n\n    onNavToPetList() {\n      this.appRouter.navigate(['takers/pets', this.takerId, this.page, this.size]);\n    }\n\n  }\n\n  TakerDetailsComponent.ɵfac = function TakerDetailsComponent_Factory(t) {\n    return new (t || TakerDetailsComponent)(i0.ɵɵdirectiveInject(i1.TakerService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i4.MatDialog), i0.ɵɵdirectiveInject(i5.AuthenticationService), i0.ɵɵdirectiveInject(i6.TakerCache));\n  };\n\n  TakerDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TakerDetailsComponent,\n    selectors: [[\"app-taker-details\"]],\n    decls: 54,\n    vars: 9,\n    consts: [[1, \"container\"], [1, \"main-body\"], [1, \"row\", \"gutters-sm\"], [1, \"col-md-4\", \"mb-3\"], [1, \"card\"], [1, \"card-body\"], [1, \"d-flex\", \"flex-column\", \"align-items-center\", \"text-center\"], [\"alt\", \"taker\", \"width\", \"150\", 1, \"rounded-circle\", 3, \"src\"], [1, \"mt-3\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"col-md-8\"], [1, \"card\", \"mb-3\"], [1, \"row\"], [1, \"col-sm-3\"], [1, \"mb-0\"], [1, \"col-sm-9\", \"text-secondary\"], [3, \"click\"], [1, \"col-sm-12\"], [1, \"btn\", \"btn-info\", 3, \"hidden\", \"click\"], [1, \"btn\", \"btn-danger\", 3, \"hidden\", \"click\"]],\n    template: function TakerDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelement(7, \"img\", 7);\n        i0.ɵɵelementStart(8, \"div\", 8);\n        i0.ɵɵelementStart(9, \"h4\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function TakerDetailsComponent_Template_button_click_11_listener() {\n          return ctx.onNavToPetList();\n        });\n        i0.ɵɵtext(12, \"Zobacz zwierzaki\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 10);\n        i0.ɵɵelementStart(14, \"div\", 11);\n        i0.ɵɵelementStart(15, \"div\", 5);\n        i0.ɵɵelementStart(16, \"div\", 12);\n        i0.ɵɵelementStart(17, \"div\", 13);\n        i0.ɵɵelementStart(18, \"h6\", 14);\n        i0.ɵɵtext(19, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 15);\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"hr\");\n        i0.ɵɵelementStart(23, \"div\", 12);\n        i0.ɵɵelementStart(24, \"div\", 13);\n        i0.ɵɵelementStart(25, \"h6\", 14);\n        i0.ɵɵtext(26, \"Telefon\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 15);\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(29, \"hr\");\n        i0.ɵɵelementStart(30, \"div\", 12);\n        i0.ɵɵelementStart(31, \"div\", 13);\n        i0.ɵɵelementStart(32, \"h6\", 14);\n        i0.ɵɵtext(33, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"div\", 15);\n        i0.ɵɵtext(35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"hr\");\n        i0.ɵɵelementStart(37, \"div\", 12);\n        i0.ɵɵelementStart(38, \"div\", 13);\n        i0.ɵɵelementStart(39, \"h6\", 14);\n        i0.ɵɵtext(40, \"Schronisko\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"div\", 15);\n        i0.ɵɵelementStart(42, \"a\", 16);\n        i0.ɵɵlistener(\"click\", function TakerDetailsComponent_Template_a_click_42_listener() {\n          return ctx.onNavToShelterDetails();\n        });\n        i0.ɵɵtext(43);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(44, \"hr\");\n        i0.ɵɵelementStart(45, \"div\", 12);\n        i0.ɵɵelementStart(46, \"div\", 17);\n        i0.ɵɵelementStart(47, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function TakerDetailsComponent_Template_button_click_47_listener() {\n          return ctx.onNavToEdit();\n        });\n        i0.ɵɵtext(48, \"Edytuj\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function TakerDetailsComponent_Template_button_click_49_listener() {\n          return ctx.onDelete();\n        });\n        i0.ɵɵtext(50, \" Usu\\u0144 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function TakerDetailsComponent_Template_button_click_51_listener() {\n          return ctx.onGoBack();\n        });\n        i0.ɵɵtext(52, \" Cofnij \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(53, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"src\", ctx.taker.imageUrl, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate2(\"\", ctx.taker.firstName, \" \", ctx.taker.lastName, \"\");\n        i0.ɵɵadvance(11);\n        i0.ɵɵtextInterpolate1(\" \", ctx.taker.status, \" \");\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\" \", ctx.taker.phoneNumber, \" \");\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\" \", ctx.taker.email, \" \");\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.shelter.name);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"hidden\", !ctx.isManagerOrAdmin);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.isManagerOrAdmin);\n      }\n    },\n    styles: [\"button[_ngcontent-%COMP%]{margin:10px}\"]\n  });\n  return TakerDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}