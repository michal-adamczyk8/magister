{"ast":null,"code":"import { ActivatedRoute, Router } from \"@angular/router\";\nimport { PetService } from \"src/app/pet-shared/pet-service\";\nimport { Location } from \"@angular/common\";\nimport { PetStatusEnum } from \"src/app/enum/pet-status.enum\";\nimport { PetSexEnum } from \"src/app/enum/pet-sex.enum\";\nimport { FormGroup, FormControl } from \"@angular/forms\";\nimport { TakerService } from \"src/app/taker/taker-shared/taker-service\";\nimport { NotificationService } from 'src/app/notification/notification.service';\nimport { NotificationType } from 'src/app/enum/notification-type.enum';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ConfirmDialogComponent } from 'src/app/common/confirm-dialog/confirm-dialog.component';\nimport { PetCache } from 'src/app/pet-shared/pet-cache.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/pet-shared/pet-service\";\nimport * as i2 from \"src/app/taker/taker-shared/taker-service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"src/app/notification/notification.service\";\nimport * as i6 from \"@angular/material/dialog\";\nimport * as i7 from \"src/app/pet-shared/pet-cache.service\";\nimport * as i8 from \"@angular/forms\";\n\nfunction PetDetailsEditComponent_option_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const petStatus_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(petStatus_r3);\n  }\n}\n\nfunction PetDetailsEditComponent_option_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const petSex_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(petSex_r4);\n  }\n}\n\nexport let PetDetailsEditComponent = /*#__PURE__*/(() => {\n  class PetDetailsEditComponent {\n    constructor(petService, takerService, route, location, appRouter, notificationService, dialog, petCacheService) {\n      this.petService = petService;\n      this.takerService = takerService;\n      this.route = route;\n      this.location = location;\n      this.appRouter = appRouter;\n      this.notificationService = notificationService;\n      this.dialog = dialog;\n      this.petCacheService = petCacheService;\n      this.takers = [];\n      this.petStatus = PetStatusEnum;\n      this.petSex = PetSexEnum;\n      this.statusEnumValues = [];\n      this.sexEnumValues = [];\n      this.doShowTakers = false;\n      this.statusEnumValues = Object.values(this.petStatus);\n      this.sexEnumValues = Object.values(this.petSex);\n    }\n\n    ngOnInit() {\n      this.getCurrentPet();\n    }\n\n    showTakers() {\n      if (this.doShowTakers === true) {\n        this.doShowTakers = false;\n      } else {\n        this.getUnassignedTakers();\n        this.doShowTakers = true;\n      }\n    }\n\n    getPetId() {\n      this.petId = +this.route.snapshot.paramMap.get(\"petId\");\n    }\n\n    getCurrentPet() {\n      this.getPetId();\n      this.petService.getSinglePet(this.petId).subscribe(response => {\n        this.pet = response;\n        this.takers = response.takers;\n        this.shelter = response.shelterDto;\n        this.onInitFormGroup(response);\n      });\n    }\n\n    getUnassignedTakers() {\n      this.takerService.getUnassignedTakersForPet(this.shelter.id, this.pet.id).subscribe(response => {\n        this.unassignedTakers = response;\n        console.log(response.length);\n      });\n    }\n\n    onInitFormGroup(pet) {\n      this.petForm = new FormGroup({\n        name: new FormControl(pet.name),\n        raceType: new FormControl(pet.raceType),\n        type: new FormControl(pet.type),\n        sex: new FormControl(pet.sex),\n        birthYear: new FormControl(pet.birthYear),\n        birthMonth: new FormControl(pet.birthMonth),\n        weight: new FormControl(pet.weight),\n        admittanceDate: new FormControl(pet.admittanceDate),\n        description: new FormControl(pet.description),\n        foundPlace: new FormControl(pet.foundPlace),\n        status: new FormControl(pet.status)\n      });\n    }\n\n    onSaveChanges(petForm) {\n      if (this.petForm.invalid) {\n        this.petForm.markAllAsTouched();\n        return;\n      }\n\n      this.editPet(petForm);\n      this.petService.saveEditedPet(this.pet);\n      this.notificationService.notify(NotificationType.SUCCESS, \"Zwierzak został pomyślnie zaktualizowany.\");\n      this.goToDetails(this.pet);\n    }\n\n    editPet(petForm) {\n      this.pet.type = petForm.value.type;\n      this.pet.description = petForm.value.description;\n      this.pet.admittanceDate = petForm.value.admittanceDate;\n      this.pet.sex = petForm.value.sex;\n      this.pet.foundPlace = petForm.value.foundPlace;\n      this.pet.weight = petForm.value.weight;\n      this.pet.birthYear = petForm.value.birthYear;\n      this.pet.birthMonth = petForm.value.birthMonth;\n      this.pet.status = petForm.value.status;\n      this.pet.name = petForm.value.name;\n      this.pet.raceType = petForm.value.raceType;\n      this.petCacheService.update(this.pet);\n    }\n\n    onDelete() {\n      const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n        maxWidth: \"400px\",\n        data: {\n          title: \"Jesteś pewien?\",\n          message: \"Właśnie usuwasz tego zwierzaka z systemu.\"\n        }\n      });\n      dialogRef.afterClosed().subscribe(dialogResult => {\n        if (dialogResult) {\n          this.petService.deletePet(this.pet.id);\n          this.appRouter.navigate(['/pets']);\n        }\n      });\n    }\n\n    onGoBack() {\n      this.location.back();\n    }\n\n    goToDetails(pet) {\n      this.appRouter.navigate([\"pets/details\", pet.id]);\n    }\n\n  }\n\n  PetDetailsEditComponent.ɵfac = function PetDetailsEditComponent_Factory(t) {\n    return new (t || PetDetailsEditComponent)(i0.ɵɵdirectiveInject(i1.PetService), i0.ɵɵdirectiveInject(i2.TakerService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Location), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i5.NotificationService), i0.ɵɵdirectiveInject(i6.MatDialog), i0.ɵɵdirectiveInject(i7.PetCache));\n  };\n\n  PetDetailsEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PetDetailsEditComponent,\n    selectors: [[\"app-pet-details-edit\"]],\n    decls: 101,\n    vars: 7,\n    consts: [[1, \"container\"], [1, \"main-body\"], [1, \"row\", \"gutters-sm\"], [1, \"col-md-4\", \"mb-3\"], [1, \"card\"], [1, \"card-body\"], [1, \"d-flex\", \"flex-column\", \"align-items-center\", \"text-center\"], [\"alt\", \"Zdj\\u0119cie psa\", \"width\", \"150\", 1, \"customimg\", 3, \"src\"], [1, \"mt-3\"], [1, \"text-secon\", \"gdary\", \"mb-1\"], [1, \"text-muted\", \"font-size-sm\"], [1, \"col-md-8\"], [3, \"formGroup\", \"ngSubmit\"], [\"form\", \"ngForm\"], [1, \"card\", \"mb-3\"], [1, \"row\"], [1, \"col-sm-3\"], [1, \"mb-0\"], [1, \"col-sm-9\", \"text-secondary\"], [\"type\", \"text\", \"formControlName\", \"name\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"raceType\", 1, \"form-control\"], [\"name\", \"petStatus\", \"formControlName\", \"status\", 1, \"form-control\"], [4, \"ngFor\", \"ngForOf\"], [\"name\", \"petSex\", \"formControlName\", \"sex\", 1, \"form-control\"], [\"id\", \"birthYear\", \"type\", \"number\", \"formControlName\", \"birthYear\", 1, \"form-control\"], [\"type\", \"number\", \"formControlName\", \"birthMonth\", 1, \"form-control\"], [\"type\", \"date\", \"formControlName\", \"admittanceDate\", 1, \"form-control\"], [\"type\", \"number\", \"formControlName\", \"weight\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"foundPlace\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"description\", 1, \"form-control\"], [1, \"col-sm-12\"], [\"type\", \"submit\", 1, \"btn\", \"btn-info\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n    template: function PetDetailsEditComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r5 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelement(7, \"img\", 7);\n        i0.ɵɵelementStart(8, \"div\", 8);\n        i0.ɵɵelementStart(9, \"h4\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"p\", 9);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p\", 10);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 11);\n        i0.ɵɵelementStart(16, \"form\", 12, 13);\n        i0.ɵɵlistener(\"ngSubmit\", function PetDetailsEditComponent_Template_form_ngSubmit_16_listener() {\n          i0.ɵɵrestoreView(_r5);\n\n          const _r0 = i0.ɵɵreference(17);\n\n          return ctx.onSaveChanges(_r0);\n        });\n        i0.ɵɵelementStart(18, \"div\", 14);\n        i0.ɵɵelementStart(19, \"div\", 5);\n        i0.ɵɵelementStart(20, \"div\", 15);\n        i0.ɵɵelementStart(21, \"div\", 16);\n        i0.ɵɵelementStart(22, \"h6\", 17);\n        i0.ɵɵtext(23, \"Imi\\u0119\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 18);\n        i0.ɵɵelement(25, \"input\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(26, \"hr\");\n        i0.ɵɵelementStart(27, \"div\", 15);\n        i0.ɵɵelementStart(28, \"div\", 16);\n        i0.ɵɵelementStart(29, \"h6\", 17);\n        i0.ɵɵtext(30, \"Rasa\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 18);\n        i0.ɵɵelement(32, \"input\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"hr\");\n        i0.ɵɵelementStart(34, \"div\", 15);\n        i0.ɵɵelementStart(35, \"div\", 16);\n        i0.ɵɵelementStart(36, \"h6\", 17);\n        i0.ɵɵtext(37, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"div\", 18);\n        i0.ɵɵelementStart(39, \"select\", 21);\n        i0.ɵɵtemplate(40, PetDetailsEditComponent_option_40_Template, 2, 1, \"option\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"hr\");\n        i0.ɵɵelementStart(42, \"div\", 15);\n        i0.ɵɵelementStart(43, \"div\", 16);\n        i0.ɵɵelementStart(44, \"h6\", 17);\n        i0.ɵɵtext(45, \"P\\u0142e\\u0107\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"div\", 18);\n        i0.ɵɵelementStart(47, \"select\", 23);\n        i0.ɵɵtemplate(48, PetDetailsEditComponent_option_48_Template, 2, 1, \"option\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(49, \"hr\");\n        i0.ɵɵelementStart(50, \"div\", 15);\n        i0.ɵɵelementStart(51, \"div\", 16);\n        i0.ɵɵelementStart(52, \"h6\", 17);\n        i0.ɵɵtext(53, \"Rok urodzenia\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"div\", 18);\n        i0.ɵɵelement(55, \"input\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(56, \"hr\");\n        i0.ɵɵelementStart(57, \"div\", 15);\n        i0.ɵɵelementStart(58, \"div\", 16);\n        i0.ɵɵelementStart(59, \"h6\", 17);\n        i0.ɵɵtext(60, \"Miesi\\u0105c urodzenia\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(61, \"div\", 18);\n        i0.ɵɵelement(62, \"input\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(63, \"hr\");\n        i0.ɵɵelementStart(64, \"div\", 15);\n        i0.ɵɵelementStart(65, \"div\", 16);\n        i0.ɵɵelementStart(66, \"h6\", 17);\n        i0.ɵɵtext(67, \"Data przyj\\u0119cia\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(68, \"div\", 18);\n        i0.ɵɵelement(69, \"input\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(70, \"hr\");\n        i0.ɵɵelementStart(71, \"div\", 15);\n        i0.ɵɵelementStart(72, \"div\", 16);\n        i0.ɵɵelementStart(73, \"h6\", 17);\n        i0.ɵɵtext(74, \"Waga w (kg)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(75, \"div\", 18);\n        i0.ɵɵelement(76, \"input\", 27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(77, \"hr\");\n        i0.ɵɵelementStart(78, \"div\", 15);\n        i0.ɵɵelementStart(79, \"div\", 16);\n        i0.ɵɵelementStart(80, \"h6\", 17);\n        i0.ɵɵtext(81, \"Gdzie znaleziony\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(82, \"div\", 18);\n        i0.ɵɵelement(83, \"input\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(84, \"hr\");\n        i0.ɵɵelementStart(85, \"div\", 15);\n        i0.ɵɵelementStart(86, \"div\", 16);\n        i0.ɵɵelementStart(87, \"h6\", 17);\n        i0.ɵɵtext(88, \"Opis\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(89, \"div\", 18);\n        i0.ɵɵelement(90, \"input\", 29);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(91, \"hr\");\n        i0.ɵɵelementStart(92, \"div\", 15);\n        i0.ɵɵelementStart(93, \"div\", 30);\n        i0.ɵɵelementStart(94, \"button\", 31);\n        i0.ɵɵtext(95, \" Zapisz zmiany \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(96, \"button\", 32);\n        i0.ɵɵlistener(\"click\", function PetDetailsEditComponent_Template_button_click_96_listener() {\n          return ctx.onGoBack();\n        });\n        i0.ɵɵtext(97, \" Cofnij \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(98, \"button\", 33);\n        i0.ɵɵlistener(\"click\", function PetDetailsEditComponent_Template_button_click_98_listener() {\n          return ctx.onDelete();\n        });\n        i0.ɵɵtext(99, \" Usu\\u0144 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(100, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"src\", ctx.pet.imageUrl, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.pet.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.pet.raceType);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.pet.sex);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.petForm);\n        i0.ɵɵadvance(24);\n        i0.ɵɵproperty(\"ngForOf\", ctx.statusEnumValues);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sexEnumValues);\n      }\n    },\n    directives: [i8.ɵNgNoValidate, i8.NgControlStatusGroup, i8.FormGroupDirective, i8.DefaultValueAccessor, i8.NgControlStatus, i8.FormControlName, i8.SelectControlValueAccessor, i4.NgForOf, i8.NumberValueAccessor, i8.NgSelectOption, i8.ɵNgSelectMultipleOption],\n    styles: [\"button[_ngcontent-%COMP%]{margin:10px}.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:\\\"\\\";display:table;clear:both}.checkbox[_ngcontent-%COMP%]   .cr[_ngcontent-%COMP%]{position:relative;display:inline-block;border:1px solid #a9a9a9;border-radius:.25em;width:1.3em;height:1.3em;float:left;margin-right:.5em}.checkbox[_ngcontent-%COMP%]   .cr[_ngcontent-%COMP%]   .cr-icon[_ngcontent-%COMP%]{position:absolute;font-size:.8em;line-height:0;top:50%;left:15%}.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + .cr[_ngcontent-%COMP%] > .cr-icon[_ngcontent-%COMP%]{opacity:0}.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .cr[_ngcontent-%COMP%] > .cr-icon[_ngcontent-%COMP%]{opacity:1}.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled + .cr[_ngcontent-%COMP%]{opacity:.5}.customimg[_ngcontent-%COMP%]{width:200px;height:200px;-o-object-fit:cover;object-fit:cover;overflow:hidden;border-radius:50%}\"]\n  });\n  return PetDetailsEditComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}